<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>brushMask</title>
  <style>
    body {
      background-color: red;
    }

    .unselectable {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    #canvas {
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>

<body>

  <p class="unselectable">
    sadoifhj asjldfhlasdjkfh lkasjdfh lkjasdfhlkasjdfhlaksdjfh lkajsdfh alskdjfh asldkjfh aslkdjfh klajsdh klajsdhflkajsdf lkasd lkasdjh ljkasdfh akljsdfh aklsdjfh laksdjfh aslkjdfh alskdjfh alksdjfh alskdjfh alskdjfh aslkdjfh asdlkjfh asdkljfh asdlkjfh asdlkjfh
    asdlkjfh asdlkjfh asldkjfh asdkljfh asdlkjfh asdlkjfh asdlkjfh adslkjfh adslkjfh adslkjfh asdlkjfh asdlkjfh asdlkjfh alsdkjfh alskdjfh alskdjfh alksjdfh sakldjfh asdlkjfh asdlkjh flkjasdhf
  </p>

  <canvas id="canvas" width="400" height="300"></canvas>

  <script type="text/javascript">
    var lastX = 0,
      lastY = 0,
      mouseBtn = false,
      brushSize = 15;
    var canvas, context;

    function updateLastPos(e) {
      if (e.type.indexOf('touch') >= 0) {
        var pos = e.touches.item(0);
        lastX = pos.clientX - pos.target.offsetLeft;
        lastY = pos.clientY - pos.target.offsetTop;
      } else {
        lastX = e.offsetX;
        lastY = e.offsetY;
      }
    }

    function startDraw(e) {
      updateLastPos(e);
      context.globalCompositeOperation = 'destination-out';
      context.beginPath();
      context.moveTo(lastX, lastY);
      mouseBtn = true;
    }

    function drawStep(e) {
      if (mouseBtn) {
        updateLastPos(e);
        context.lineTo(lastX, lastY);
        context.stroke();
      }
    }

    function stopDraw(e) {
      context.globalCompositeOperation = 'source-over';
      mouseBtn = false;
    }

    window.onload = function() {
      canvas = document.getElementById('canvas');
      context = canvas.getContext("2d");
      canvas.style.width = window.innerWidth + "px";
      canvas.style.height = window.innerHeight + "px";

      if (!context) {
        return;
      }

      var img = new Image();
      img.addEventListener('load', function() {
        context.drawImage(img, 0, 0);
      });

      img.src = "concrete-wall-3.png";
      context.lineWidth = brushSize;
      context.lineCap = 'round';

      canvas.addEventListener('touchstart', startDraw);
      canvas.addEventListener('touchmove', drawStep);
      canvas.addEventListener('touchend', stopDraw);
      canvas.addEventListener('mouseout', stopDraw);
      canvas.addEventListener('mousedown', startDraw);
      canvas.addEventListener('mousemove', drawStep);
      canvas.addEventListener('mouseup', stopDraw);

      window.addEventListener('resize', resizeCanvas, false);
      resizeCanvas();

    };

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      drawStuff();
    }

    function drawStuff() {
      // do your drawing stuff here
    }
  </script>
</body>

</html>
